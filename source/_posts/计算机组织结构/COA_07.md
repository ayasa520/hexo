---
title: "计算机组织结构(七) 外存"
tag: ['底层','计组']
categories: 'NJU 笔记'
---

{% note blue ' fas fa-rocket' modern %}
📚 文档目录
<a href="/2021/05/15/计算机组织结构/COA_00">合集</a>-<a href="/2021/05/15/计算机组织结构/COA_01">数的二进制表示</a>-<a href="/2021/05/15/计算机组织结构/COA_02">定点运算</a>-<a href="/2021/05/15/计算机组织结构/COA_03">BCD 码</a>-<a href="/2021/05/15/计算机组织结构/COA_04">浮点数四则运算</a>-<a href="/2021/05/15/计算机组织结构/COA_05">内置存储器</a>-<a href="/2021/05/15/计算机组织结构/COA_06">Cache</a>-<a href="/2021/05/15/计算机组织结构/COA_07">外存</a>-<a href="/2021/05/15/计算机组织结构/COA_08">纠错</a>-<a href="/2021/05/15/计算机组织结构/COA_09">RAID</a>-<a href="/2021/05/15/计算机组织结构/COA_10">内存管理</a>-<a href="/2021/05/15/计算机组织结构/COA_11">总线</a>-<a href="/2021/05/15/计算机组织结构/COA_12">指令集: 特征</a>-<a href="/2021/05/15/计算机组织结构/COA_13"> 指令集:寻址方式和指令格式</a>
{% endnote %}


+ 特点
  + 大容量,非常用
  + 非易失性
+ 类型
  + 磁盘
  + 光盘
  + 磁带
  + U盘,SSD

## 磁盘

+ 磁盘是一种由非磁性材料制成的称为衬底的圆盘,其上涂有一层磁性材料.
  + 衬底材料: 铝合金,铝,玻璃..
  + 玻璃衬底的优点:
    + 改善磁层表面的均匀性,增加磁盘的可靠性.
    + 显著减少整个表面的缺陷,有助于减少读写错误.
    + 支持更低的飞行高度.
    + 更好的刚度,降低了磁盘的动力需求.
    + 更好的耐冲击和耐磨损能力.
+ 分类:
  + 软盘
  + 硬盘

### 物理特性

<img src="https://cdn.jsdelivr.net/gh/ayasa520/ayasa520.github.io/image/README.assets/3e4cbe481f534268d23e2afca86fc7c67241ab98.webp" style="zoom:80%;" />

+ 采用可移动磁头,每面只有一个读-写头.磁头固定在支架上,支架可以伸缩,使磁头可以定位到任意磁道.
+ 任何时候,所有的磁头都定位在磁道上,所有的磁道都是同心圆.
+ 磁盘上相对位置相同的所有磁道的集合称为柱面.

### 读写机制

<img src="https://cdn.jsdelivr.net/gh/ayasa520/ayasa520.github.io/image/README.assets/e05df25e7ef8c81a42d80706580c0351ca98ce24.webp" style="zoom:80%;" />

+ 读-写是通过一个叫做**磁头**的导电线圈进行的.
+ 读写期间,磁头静止不动,盘片高速旋转
+ 头的数量:
  + 单: 读写共用一个头.用于软盘, 老式硬盘.
  + 双: 单独的读,写头.用于现代硬盘.

#### 写机制

+ 脉冲电流送入写磁头.
+ 利用通电线圈周围产生磁场的性质,线圈中的电流在缝隙中感应出一个磁场.
+ 产生的磁化模式被记录在其下的磁盘表面
+ 逆转电流的方向将逆转记录介质上的磁化方向.

#### 读机制

+ 传统的读机制采用磁盘相对线圈运动产生磁场的效应.
+ 当代读机制采用一个单独的读磁头,由一个部分被屏蔽的磁阻(MR)传感器组成.当下方介质的磁化方向改变的时候,电阻会发生变化.
+ 让电流通过 MR 传感器,电阻的变化作为电压变化被检测出来.
+ MR 设计允许高频操作, 这等同于更高的存储密度和更快的操作速度.

#### 磁头机制

磁头必须产生或者感应到足够大小的电磁场,以便正确读写.

+ 较窄的磁头要求与盘面距离更近.
+ 更大的数据密度需要更窄的磁头和更窄的磁道.这将导致更大的出错率.
+ 温切斯特磁盘:
  + 磁头是一个空气动力箔片,盘片静止时,他停靠在盘面上.
  + 旋转盘片产生的气压足以使滤波从表面上升起.

### 数据组织和格式化

<img src="https://cdn.jsdelivr.net/gh/ayasa520/ayasa520.github.io/image/README.assets/fca4b3384798d7895a61507b0374a7cd767c1c06.webp" style="zoom:80%;" />

+ 盘上的数据组织呈现为一组同心圆环,圆环被称为**磁道**(track).
+ 数据以**扇区**(sectors)为单位传入或者传出磁盘.通常大小为 512 字节
+ 相邻此岛之间有**间隙**(gap),它可以防止或减少由于磁头未对准或磁域干扰引起的错误.为了防止对系统提出不合理的定位要求,相邻的扇区也留有间隙.

#### 恒定角速度(CAV)

+ 盘外沿的传输要比靠近盘中心快, 通过增加位之间的间隔,使磁盘以固定的速度扫描信息.
+ 优点:
  + 可以用磁道号和扇区号直接寻址.
+ 缺点:
+ 外围长磁道与内圈短磁道存储的数据一样多.
  <img src="https://cdn.jsdelivr.net/gh/ayasa520/ayasa520.github.io/image/README.assets/4adceca11695a8e1f1a09320d9146fed93c63b56.webp"/>

#### 多重区域记录

+ 盘面被分为多个区域,每个区域中各磁道的扇区数是一定的,远离中心的磁道能够容纳更多的扇区.
+ 优势: 提升了存储容量.
+ 劣势: 实现的电路更加复杂.

#### 格式化

<img src="https://cdn.jsdelivr.net/gh/ayasa520/ayasa520.github.io/image/README.assets/8f96c47ff22976a116674aba9e61d84bd1fdb87a.webp"/>

+ 磁道必须有一些起始点和辨识每个扇区的起点及终点的方法.
+ 格式: 附加一些仅被磁盘驱动器使用而不被用户存取的额外数据.
  + ID 域是唯一的一个标识或地址，用于定位具体的扇区.
  + 同步字节是一个特殊的位模式，用来定义区域的起始点.
  + 磁道号标识磁盘表面上的一个磁道.
  + 磁头号标识一个磁头，因为磁盘有多个面.
  + ID 和数据域各包含一个检错码.

### 磁盘性能参数

<img src="https://cdn.jsdelivr.net/gh/ayasa520/ayasa520.github.io/image/README.assets/dffc832d9baadeeeae29a68f40aed1b8868f484e.jpg">

#### 寻道时间

+ 磁头定位到该磁道所花的时间.
  + 初始启动的时间
  + 穿越磁道的时间

#### 旋转延迟

+ 等待相应扇区的起始处到达磁头的时间.
  + 平均为磁盘周期的一半.

#### 存取时间

+ **寻道时间**和**旋转延迟**总和

#### 传送时间

+ 数据传送到磁盘所需时间
  $$T=\frac {b}{rN}$$
  + $b$ 待传送字节数
  + $N$ 各磁道的字节数
  + $r$ 转速

#### 总平均存取时间

$$T = T_S + \frac{1}{2r} + \frac{b}{rN}$$

+ 可以证明磁盘整理加快存取速度.

### 磁盘调度算法

+ 先来先服务(FCFS)
  + 按 I/O 请求的顺序处理.
+ 最短寻道时间(SSTF)
  + 优先处理距离当前磁头位置的最短寻道时间的请求.
+ SCAN
  + 在 0 和 N 之间移动磁头,优先处理当前移动方向上的请求,到达一端后反向.
+ C-SCAN
  + 将磁头从 N 移动到 0, 到达 0 后立即返回 N
+ LOOK
  + 建立在 SCAN 和 C-SCAN 的基础上, 磁头只移动到一个方向最远的请求.

## 光盘

### CD 和 CD-ROM

<img src="https://cdn.jsdelivr.net/gh/ayasa520/ayasa520.github.io/image/README.assets/7fb8c174c901eee86e22e7ba055ac09d454ae5c6.jpg">

+ 生产
  + 用精密聚焦的高强度激光制造母盘.
  + 用母盘在聚碳酸酯上压印出复制品.
  + 在凹坑表面镀上高反射的材料.
  + 表面涂一层丙烯酸树脂防止灰尘或划伤.
  + 用丝网印刷术把标签印刷在丙烯酸上.
+ 读
  + 通过安装在光盘播放机或驱动器中的低功率激光从CD或CD-ROM中检索
  + 如果激光束落在表面有点粗糙的凹坑上，光就会散射，低强度的光就会反射回来
  + 如果激光束落在一个光滑的表面上，更高的强度会被反射回来
  + 磁盘包含一个单一的螺旋轨道，和所有扇区是相同的长度
  + 以变速旋转磁盘
  + 然后激光以恒定的线速度读取凹坑
+ CD和CD - ROM的区别
  + CD-ROM player更坚固，并有错误纠正设备，以确保数据正确传输
+ 优势
  + 光盘和存储在上面的信息可以廉价地大量复制
  + 光盘是可移动的
+ 缺点
  + 它是只读的，不能更新
  + 它的存取时间比磁盘长得多

### CD-R

+ 包括染色层，用于改变反射率，并被高强度激光激活
+ 可以用适当强度激光写入一次
+ 生成的磁盘可以在CD-R或CD-ROM驱动器上读取

### CD-RW

+ 使用一种在不同相位下反射率显著不同的材料, 可以被激光改变.
+ 会随着使用老化最终完全失去性能.

### DVD

<img src = "https://cdn.jsdelivr.net/gh/ayasa520/ayasa520.github.io/image/README.assets/d44806d7159cd21cf86706a28d258d64997d5484.webp">

+ 与CD相比 
  + 位组装更加紧密.
  + DVD 采用双层结构
  + DVD-ROM可以是双面的, CD只能是单面的.

## 磁带

+ 顺序存储
+ 廉价
+ 写方式
  + 并行写:多个磁道同时写 
  + 串行写:一个磁道返回来写另一个

